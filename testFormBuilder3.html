<html>
<head>
<title>Dynamically build FT survey</title>

<script language="javascript">

var chapCount = 0;

var chapter = {
    quesNum: 0,
    addQues: function(quesTextInput) {

        // Reset question input text box
        document.getElementById('quesInput').value = "";
        thisQues = "question" + this.quesNum;
        this[thisQues] = {
            ansNum: 0,
            quesText: quesTextInput,
            addAns: function(ansText) {
                console.log(ansText);
                this["ans" + this.ansNum] = ansText;

                var toAnsPlace = document.createElement("dd");
                toAnsPlace.id = "ansID" + this.ansNum;

                var currentQuesBullet = document.getElementById("quesID" + this.quesNum);
                currentQuesBullet.appendChild();

                this.ansNum += 1;
            },
            deleteAns: function(quesToDel, quesIDnum) {
                // first remove from object
                console.log("Removing question" + quesIDnum);
                delete chapter[quesToDel];

                // next remove from dom
                starterSpan.removeChild(quesIDnum);

            }
        };

        var tqQuesPlace = document.createElement("dt");
        tqQuesPlace.id = "quesID" + this.quesNum;

        var ansBoxID = "ansBox" + this.quesNum; 

        // vars to get around issue of truncation due to multiple quotation marks
        var ansBoxIDClick = "chapter." + thisQues + ".addAns(document.getElementById('" + ansBoxID + "').value)";
        var thisQuesClick = "chapter." + thisQues + ".deleteAns('" + thisQues + "'," + tqQuesPlace.id + ")";

        var addAnsButton = "<input type='text' id='" + ansBoxID + "'> <button type='button' style='width:100px' onclick=" + ansBoxIDClick + ">Add an Answer</button>";
        var addDelButton = "<button type='button' style='width:100px' onclick=" + thisQuesClick + ">Delete Answer</button>";

        tqQuesPlace.innerHTML = quesTextInput + '<br>' + addAnsButton + addDelButton + '<br><br>';
        var starterSpan = document.getElementById("starterSpan");
        starterSpan.appendChild(tqQuesPlace);

        this.quesNum += 1;
    }
};


</script>

<body>

<h2>Add Components</h2>

<br>
<input type="text" id="chapInput"><button type="button" style="width:100px" onclick="">Add a Chapter</button><br>
<input type="text" id="quesInput"><button type="button" style="width:100px" onclick="chapter.addQues(document.getElementById('quesInput').value)">Add a Question</button><br>

<h2>Survey Structure</h2>
<dl id="starterSpan"></dl>

</body>
</html>