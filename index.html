<!DOCTYPE html>
<html>
    <head>
    	<meta charset="UTF-8">
    	<link href="css/bootstrap.min.css" rel="stylesheet">
    	<link href="css/bootstrap-switch.min.css" rel="stylesheet">
        <title>
            Dynamically build FT survey
        </title>
    	<style>
		    html, body {
		        height: 100%;
		        margin: 0px;	
		        padding: 0px;
		        text-align: left;
		    }
		    .project{
		    	background: #F0FFF0;
		    	position: relative;
	      		overflow: hidden;
	      		padding-top: 10px;
	      		width: 64%;
	      		min-width: 400px; 
	      		float: right;
	      		display: inline-block;
	      		text-align: left;
		    }
	      	.survey {
	      		border-radius: 5px;
	      		overflow: hidden;
	      		padding: 10px;		
	      	}
	      	.tracker {
	      		border-radius: 5px;
	      		overflow: hidden;
	      		padding: 10px;	
	      	}      	
	      	.chapter {
	      		border-radius: 5px;
	        	min-height: 100px;
	      		margin: 10px;
		        padding: 10px
	      	}	
	      	.question{
	      		border-radius: 5px;
	      		margin: 10px;
		        padding: 10px
	      	}
	      	.questionsContainerDIV{
	      		border-radius: 5px;
	      		overflow: hidden;
	      		padding: 10px
	      	}
	      	.chaptersContainerDIV{
	      		border-radius: 5px;
	      		overflow: hidden;
	      		padding: 10px
	      	}
	      	.chapterContainerDIV{
	      		border-radius: 5px;
	      		margin: 2px;
		        padding: 2px;
		        position: relative;
		        width: 100%;
	   			float: left;
	      	}
	      	.questionContainerDIV{
	      		border-radius: 5px;
	      		margin: 2px;
		        padding: 2px;
	      	}
	      	.answersContainerDIV{
	      		border-radius: 5px;
	      		overflow: hidden;
	      		padding: 10px
	      	}
	      	.answerContainerDIV{
	      		border-radius: 5px;
	      		margin: 2px;
		        padding: 2px;
	      	}
	      	.jsonFloat{
	      		position: fixed;
	      		padding: 20px;
	      		top: 100px;
	      		text-align: left;
	      		white-space: pre-wrap; 
	      		width: 35%;
	      		height: 90%;
	      		overflow:hidden;
	      		word-wrap: break-word;
	      		border-radius: 5px
	      	}
	      	.h4{
	      		position: fixed;
	      		padding-left: 10px;
	      		padding-top:10px;
	      		padding-bottom: 10px;
	      		text-align: center;
	      		width: 35%;
	      		color: #333;
	      		border-radius: 5px
	      	}
    	</style>
	</head>
    <body>
    	<div id="project_container">
    		<div class="h4">Flocktracker JSON Builder</div>
    		<button class="btn btn-success btn-md" style="width:35%; margin-top:58px;position:fixed;" onclick="console.log('working')">Submit Survey</button>
    		<div id="JsonGoesHere" class="jsonFloat"></div>
    		<div id="survey_container"></div>
    	</div>
  	</body>
  	<script src="js/jquery-1.11.1.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/bootstrap-switch.min.js"></script>
    <script language="javascript">
    	var superString = '{"Survey":{"Chapters":[{"Chapter":"Situación de lote y vivienda","Questions":[{"id":"q1","Question":"¿Cuál es el uso de su lote?","Kind":"MC","Other":true,"Answers":[{"Answer":"Habitacional"},{"Answer":"Mixto"}]},{"id":"q2","Question":"¿Cuál es la superficie del lote?(m2)","Kind":"ON"},{"id":"q3","Question":"¿Cuál es la superficie construida de su lote?(m2)","Kind":"ON"},{"id":"q4","Question":"¿Cuántas viviendas están construidas en este predio?","Kind":"MC","Other":false,"Answers":[{"Answer":"1"},{"Answer":"2"},{"Answer":"3"},{"Answer":"4"},{"Answer":"5 o más"}]},{"id":"q97","Question":"Número de familias en el predio","Kind":"MC","Other":false,"Answers":[{"Answer":"1"},{"Answer":"2"},{"Answer":"3 o más"}]},{"id":"q98","Question":"Número de habitantes del predio","Kind":"ON"},{"id":"q6a","Question":"¿A través de quién adquirió/rentó/ocupó el lote?","Kind":"MC","Other":true,"Answers":[{"Answer":"Fraccionador"},{"Answer":"Lider"},{"Answer":"Comunitario"},{"Answer":"Ejidatario o comunero"},{"Answer":"Funcionario"},{"Answer":"Propietario"}]},{"id":"q6","Question":"Este predio es:","Kind":"MC","Other":true,"Answers":[{"Answer":"Propio"},{"Answer":"Rentado 6b","Jump":"q6b"},{"Answer":"Prestado 6d"},{"Answer":"Compartido 6d"},{"Answer":"Lo cuida 6d"},{"Answer":"Secesión de derechos 6d"},{"Answer":"Otra tenencia 6d"}]},{"id":"q6a","Question":"¿Qué documentos de posesión y/o propiedad tiene?","Jump":"q7","Kind":"MC","Other":false,"Answers":[{"Answer":"Escrituras"},{"Answer":"Ninguno, no tiene"},{"Answer":"Regular, en tramite"},{"Answer":"Otro documento"}]},{"id":"q6b","Question":"Si renta, ¿Cuánto paga mensualmente?($)","Kind":"ON"},{"id":"q7","Question":"¿Cuánto tiempo lleva viviendo aquí?(años)","Kind":"ON"},{"id":"q8","Question":"¿Está el predio en algún proceso de regularización?","Kind":"MC","Other":false,"Answers":[{"Answer":"Sí"},{"Answer":"No"}]},{"id":"q8a","Question":"¿Cómo se entero de que en este lugar se podía vivir?","Kind":"MC","Other":true,"Answers":[{"Answer":"Por medio de un familiar"},{"Answer":"Por un amigo"},{"Answer":"Por que vive aquí cerca"}]},{"id":"q9","Question":"¿Sabe que adquirió un lote en zona no apta para vivienda?","Kind":"MC","Other":false,"Answers":[{"Answer":"Sí"},{"Answer":"No"}]}]},{"Chapter":"Servicios Públicos","Questions":[{"id":"q10","Question":"¿De que manera se abastecen de agua en la vivienda?","Kind":"MC","Other":true,"Jump":"q10e","Answers":[{"Answer":"Entubada adentro de vivienda","Jump":"q10e"},{"Answer":"Entubada afuera de vivienda","Jump":"q10e"},{"Answer":"Llave pública o hidrante","Jump":"q10e"},{"Answer":"Pipas","Jump":"q10a1"},{"Answer":"Tambos"},{"Answer":"Tandeo","Jump":"q10b"},{"Answer":"Pozo","Jump":"q10c"},{"Answer":"Animal de Carga","Jump":"q10d"}]},{"id":"q10a","Question":"Cuánto le cuesta rellenar su tambo?","Kind":"ON","Jump":"q11"},{"id":"q10a1","Question":"¿De cuántos litros se abastece?","Kind":"MC","Other":"false","Answers":[{"Answer":"0-200"},{"Answer":"201-400"},{"Answer":"401-600"},{"Answer":"mas de 600"}]},{"id":"q10a2","Question":"¿Cuál es el costo?($)","Kind":"ON"},{"id":"q10a","Question":"La pipa que utiliza es:","Kind":"MC","Other":"false","Answers":[{"Answer":"Pública"},{"Answer":"Privada","Jump":"q10a21"}]},{"id":"q10a11","Question":"¿Cuánta propina da?","Kind":"ON"},{"id":"q10a12","Question":"¿Quién la envía?","Kind":"MC","Other":true,"Jump":"q11","Answers":[{"Answer":"Delegación"},{"Answer":"Sistema de Aguas de la Ciduad de México (SACM)"}]},{"id":"q10a21","Question":"¿Cuántas veces a la semana?","Kind":"MC","Other":"false","Answers":[{"Answer":"Una vez"},{"Answer":"Dos veces"},{"Answer":"Diario"},{"Answer":"Cada 15 días"},{"Answer":"Una vez al mes"}]},{"id":"q10a22","Question":"¿Qué días?","Kind":"CB","Other":"false","Jump":"q11","Answers":[{"Answer":"Lunes"},{"Answer":"Martes"},{"Answer":"Miércoles"},{"Answer":"Juevés"},{"Answer":"Viernes"},{"Answer":"Sábado"},{"Answer":"Domingo"},{"Answer":"Varia"}]},{"id":"q10b","Question":"¿Cuántas horas al día?","Kind":"ON"},{"id":"q10b1","Question":"¿En qué momento del día llega el agua?","Kind":"CB","Other":"false","Answers":[{"Answer":"Mañana"},{"Answer":"Tarde"},{"Answer":"Noche"}]},{"id":"q10b2","Question":"¿Cuántas veces a la semana?","Kind":"MC","Other":"false","Jump":"q11","Answers":[{"Answer":"Una vez"},{"Answer":"Dos veces"},{"Answer":"Diario"},{"Answer":"Cada 15 días"},{"Answer":"Una vez al mes"}]},{"id":"q10c","Question":"¿Cuántas veces a la semana?","Kind":"MC","Other":"false","Answers":[{"Answer":"Una vez"},{"Answer":"Dos veces"},{"Answer":"Diario"},{"Answer":"Cada 15 días"},{"Answer":"Una vez al mes"}]},{"id":"q10c1","Question":"¿El pozo queda cerca o lejos de su casa?","Kind":"MC","Other":"false","Answers":[{"Answer":"lejos"},{"Answer":"cerca"}]},{"id":"q10c2","Question":"¿Cuánto tiempo hace en desplazarse para ir al pozo?(min)","Kind":"MC","Other":"false","Answers":[{"Answer":"0-15"},{"Answer":"16-30"},{"Answer":"mas de 30"}]},{"id":"q10c3","Question":"¿Cuántos litros logra desplazar?","Kind":"ON"},{"id":"q10c4","Question":"¿Cómo los desplaza?","Kind":"MC","Other":"false","Jump":"q11","Answers":[{"Answer":"Caminando"},{"Answer":"Auto"},{"Answer":"Bicicleta"}]},{"id":"q10d","Question":"¿Cuántas veces a la semana?","Kind":"MC","Other":"false","Jump":"q11","Answers":[{"Answer":"Una vez"},{"Answer":"Dos veces"},{"Answer":"Tres veces"},{"Answer":"Diario"},{"Answer":"Cada 15 días"},{"Answer":"Una vez al mes"}]},{"id":"q10e","Question":"¿Con qué frecuencia llega el agua a esta vivienda?","Kind":"MC","Other":"false","Answers":[{"Answer":"Diario y a todas horas"},{"Answer":"Unas horas al dia"},{"Answer":"Unos dias a la semana"}]},{"id":"q11","Question":"¿En dónde almacena el agua?","Kind":"CB","Other":"false","Answers":[{"Answer":"En tambos"},{"Answer":"En cisterna"},{"Answer":"En tinacos"},{"Answer":"En cubetas"},{"Answer":"En una pileta"},{"Answer":"No la almacena"},{"Answer":"No contestó"}]},{"id":"q12","Question":"¿Para cuántos días le dura el agua? (Total)","Kind":"MC","Other":"false","Answers":[{"Answer":"1 a 2"},{"Answer":"3 a 5"},{"Answer":"mas de 5"}]},{"id":"q13","Question":"¿En qué actividades gasta más agua? (Seleccionar dos opciones)","Kind":"CB","Other":"false","Answers":[{"Answer":"Para el baño (inodoro)"},{"Answer":"Para bañarse"},{"Answer":"Para lavar la ropa"},{"Answer":"Para lavar y cocinar alimentos"},{"Answer":"Para lavar utencilios de cocina"}]},{"id":"q14","Question":"¿Qué aspecto tiene el agua que utiliza?","Kind":"CB","Other":"false","Answers":[{"Answer":"Limpia"},{"Answer":"Tiene mal olor"},{"Answer":"Tiene mal sabor"},{"Answer":"Sucia"}]},{"id":"q15","Question":"¿Cómo desecha las aguas residuales?","Kind":"CB","Other":"False","Answers":[{"Answer":"Drenaje público"},{"Answer":"Fosa séptica"},{"Answer":"A la calle"},{"Answer":"En caño o barranca"},{"Answer":"Al canal"}]},{"id":"q16","Question":"¿Qué utiliza para eliminar las excretas?","Kind":"MC","Other":"false","Answers":[{"Answer":"Excusado con agua"},{"Answer":"Excusado sin agua"},{"Answer":"Letrina"},{"Answer":"Hoyo negro"},{"Answer":"Al aire libre"}]}]},{"Chapter":"Luz Eléctrica","Questions":[{"id":"q18","Question":"¿La vivienda cuenta con luz eléctrica?","Kind":"MC","Other":"True","Answers":[{"Answer":"No"},{"Answer":"Sí, con medidor"},{"Answer":"Sí, sin medidor"}]}]},{"Chapter":"Residuos Sólidos","Questions":[{"id":"q19","Question":"¿Generalmente de qué manera se deshace de la basura?","Kind":"CB","Other":"True","Answers":[{"Answer":"Recolección camión de basura"},{"Answer":"Depósito fijo"},{"Answer":"Se tira a la calle"},{"Answer":"Se tira a lote baldío"},{"Answer":"Se quema o se entierra"}]}]},{"Chapter":"Combustible usado para cocinar alimentos","Questions":[{"id":"q20","Question":"¿Qué tipo de combustible utiliza para cocinar los alimentos?","Kind":"CB","Other":true,"Answers":[{"Answer":"Leña o carbon"},{"Answer":"Petróleo"},{"Answer":"Gas"},{"Answer":"Electricidad"}]}]},{"Chapter":"Otros servicios","Questions":[{"id":"q21","Question":"¿Con qué servicios cuenta fuera del lote en el que usted habita?","Kind":"CB","Other":"True","Answers":[{"Answer":"Alumbrado público"},{"Answer":"Teléfono público"},{"Answer":"Pavimentación"},{"Answer":"Empedrado"},{"Answer":"Transporte público"}]}]},{"Chapter":"Accesibilidad","Questions":[{"id":"q22","Question":"¿Cuánto tiempo camina de su casa hasta llegar a algún punto donde pase el transporte?","Kind":"MC","Other":"True","Answers":[{"Answer":"0-15"},{"Answer":"15-30"},{"Answer":"más de 30"}]},{"id":"q23","Question":"¿Cuánto tiempo hace de su casa al trabajo o escuela (incluyendo si camina)?","Kind":"MC","Other":"True","Answers":[{"Answer":"0 a 30"},{"Answer":"30 a 1 hr"},{"Answer":"1 a 1:30"},{"Answer":"mas de 1:30"}]},{"id":"q24","Question":"¿Cuántos medios de transportes utiliza para llegar ahí?","Kind":"MC","Other":"True","Answers":[{"Answer":"1"},{"Answer":"2"},{"Answer":"3"},{"Answer":"4"},{"Answer":"5"},{"Answer":"más de 5"}]},{"id":"q25","Question":"¿Cual es su principal medio de transporte?","Kind":"CB","Other":"True","Answers":[{"Answer":"micro o combi"},{"Answer":"metro"},{"Answer":"metrobús"},{"Answer":"tren suburbano"},{"Answer":"metro férreo"},{"Answer":"bici taxi"},{"Answer":"moto taxi"},{"Answer":"tren ligero"},{"Answer":"trajinera"},{"Answer":"caminando"},{"Answer":"auto"},{"Answer":"bicicleta"}]},{"id":"q26","Question":"¿Cuánto dinero gasta en transporte o gasolina al día?","Kind":"ON"},{"id":"q27","Question":"¿Cuánto dinero gasta en transporte a la semana?","Kind":"ON"},{"id":"q28","Question":"¿En qué delegación trabaja o estudia?","Kind":"CB","Other":"True","Answers":[{"Answer":"Azcapotzalco"},{"Answer":"Coyoacán"},{"Answer":"Cuajimalpa"},{"Answer":"Gustavo A. Madero"},{"Answer":"Iztacalco"},{"Answer":"Iztapalapa"},{"Answer":"Magdalena Contreras"},{"Answer":"Milpa Alta"},{"Answer":"Álvaro Obregón"},{"Answer":"Tláhuac"},{"Answer":"Tlalpan"},{"Answer":"Xochimilco"},{"Answer":"Benito Juárez"},{"Answer":"Cuauhtémoc"},{"Answer":"Miguel Hidalgo"},{"Answer":"Venustiano Carranza"},{"Answer":"Acolman"},{"Answer":"Amecameca"},{"Answer":"Apaxco"},{"Answer":"Atenco"},{"Answer":"Atizapán de Zaragoza"},{"Answer":"Atlautla"},{"Answer":"Axapusco"},{"Answer":"Ayapango"},{"Answer":"Coacalco de Berriozábal"},{"Answer":"Cocotitlán"},{"Answer":"Coyotepec"},{"Answer":"Cuautitlán"},{"Answer":"Chalco"},{"Answer":"Chiautla"},{"Answer":"Chicoloapan"},{"Answer":"Chiconcuac"},{"Answer":"Chimalhuacán"},{"Answer":"Ecatepec de Morelos"},{"Answer":"Ecatzingo"},{"Answer":"Huehuetoca"},{"Answer":"Hueypoxtla"},{"Answer":"Huixquilucan"},{"Answer":"Isidro Fabela"},{"Answer":"Ixtapaluca"},{"Answer":"Jaltenco"},{"Answer":"Jilotzingo"},{"Answer":"Juchitepec"},{"Answer":"Melchor Ocampo"},{"Answer":"Naucalpan de Juárez"},{"Answer":"Nezahualcóyotl"},{"Answer":"Nextlalpan"},{"Answer":"Nicolás Romero"},{"Answer":"Nopaltepec"},{"Answer":"Otumba"},{"Answer":"Ozumba"},{"Answer":"Papalotla"},{"Answer":"La Paz"},{"Answer":"San Martín de las Pirámides"},{"Answer":"Tecámac"},{"Answer":"Temamatla"},{"Answer":"Temascalapa"},{"Answer":"Tenango del Aire"},{"Answer":"Teoloyucan"},{"Answer":"Teotihuacán"},{"Answer":"Tepetlaoxtoc"},{"Answer":"Tepetlixpa"},{"Answer":"Tepotzotlán"},{"Answer":"Tequixquiac"},{"Answer":"Texcoco"},{"Answer":"Tezoyuca"},{"Answer":"Tizayuca"},{"Answer":"Tlalmanalco"},{"Answer":"Tlalnepantla de Baz"},{"Answer":"Tultepec"},{"Answer":"Tultitlán"},{"Answer":"Tonanitla"},{"Answer":"Villa del Carbón"},{"Answer":"Zumpango"},{"Answer":"Cuautitlán Izcalli"},{"Answer":"Valle de Chalco Solidaridad"}]}]},{"Chapter":"Pobreza del tiempo libre","Questions":[{"id":"q29","Question":"¿Cuántos trabajos tiene?","Kind":"ON"},{"id":"q30","Question":"¿Cuántos días a la semana trabaja?","Kind":"MC","Other":true,"Answers":[{"Answer":"1"},{"Answer":"2"},{"Answer":"3"},{"Answer":"4"},{"Answer":"5"},{"Answer":"6"},{"Answer":"7"}]},{"id":"q31","Question":"¿Trabaja los fines de semana?","Kind":"MC","Other":true,"Answers":[{"Answer":"SÌ"},{"Answer":"No"}]},{"id":"q34","Question":"¿Cuántas horas al día trabaja?","Kind":"ON"},{"id":"q35","Question":"¿Que hace cuando tiene tiempo libre?","Kind":"CB","Other":true,"Answers":[{"Answer":"Convive con la familia"},{"Answer":"Trata de descansar o dormir"},{"Answer":"Hace cualquier cosa dentro de su casa"},{"Answer":"Hace alguna actividad recreativa"},{"Answer":"Ir al cine"},{"Answer":"Ir al teatro"},{"Answer":"Ir al museo"},{"Answer":"Ir al parque"},{"Answer":"Ir a convivir con familiares cercanos"},{"Answer":"Ir a convivir con amigos"},{"Answer":"Leer un libro"},{"Answer":"Navegar en internet"},{"Answer":"Ver televisión"}]}]},{"Chapter":"Organización vecinal","Questions":[{"id":"q36a","Question":"Como comunidad, ¿Quién se encarga de resolver sus carencias de Agua/Pavimentación/Electricidad/Tenencia de la tierra?","Kind":"OT"},{"id":"q37","Question":"¿Dejan que se incorporen al asentamiento nuevos vecinos?","Kind":"MC","Other":false,"Jump":"q37a","Answers":[{"Answer":"Si 37a"},{"Answer":"No 37a"}]},{"id":"q37a","Question":"¿Por qué?","Kind":"OT"},{"id":"q38","Question":"¿En este asentamiento tiene algún familiar?","Kind":"MC","Other":false,"Answers":[{"Answer":"Si"},{"Answer":"No"}]},{"id":"q39","Question":"¿Alguien se encarga de organizarlos?","Kind":"MC","Other":false,"Answers":[{"Answer":"Si 39a"},{"Answer":"No","Jump":"q40"}]},{"id":"q39a","Question":"¿Quién?","Kind":"OT"},{"id":"q40","Question":"Para lograr sus demandas de servicios como agua, luz, pavimentación, vivienda. ¿A dónde acuden?","Kind":"CB","Other":true,"Answers":[{"Answer":"Coordinación Territorial"},{"Answer":"La Delegación"},{"Answer":"GDF"},{"Answer":"Partido Político"}]},{"id":"q41","Question":"¿Les han resuelto sus demandas?","Kind":"MC","Other":false,"Answers":[{"Answer":"Si 41a"},{"Answer":"No 41b","Jump":"q41b"},{"Answer":"La mayoría de las veces"}]},{"id":"q41a","Question":"¿Cuáles?","Kind":"CB","Other":true,"Jump":"q42","Answers":[{"Answer":"Agua"},{"Answer":"Pavimentación"},{"Answer":"Electricidad"},{"Answer":"Regularización y tenencia de la tierra"}]},{"id":"q41b","Question":"¿Por qué?","Kind":"OT"},{"id":"q42","Question":"¿Se han visto en la necesidad de que ustedes mismos las resuelvan?","Kind":"MC","Answers":[{"Answer":"Sí"},{"Answer":"No","Jump":"q43"}]},{"id":"q42a","Question":"¿Cómo las resuelven?","Kind":"MC","Answers":[{"Answer":"De forma colectiva"},{"Answer":"De forma individual (o por familia)"}]},{"id":"q43","Question":"¿Cuentan con una organización en la colonia?","Kind":"MC","Other":false,"Answers":[{"Answer":"Sí"},{"Answer":"No 44","Jump":"q44"}]},{"id":"q43a","Question":"¿Cuales son las funciones de la organización en la colonia?","Kind":"OT"},{"id":"q43b","Question":"¿Que logros han conseguido a través de la organización?","Kind":"CB","Other":true,"Answers":[{"Answer":"Servicios Urbanos (pavimentación, agua, luz, etc.)"},{"Answer":"Regularización de la tenencia de la tierra"},{"Answer":"Servicios sociales (educación-salud)"},{"Answer":"Metodos de abastecimiento de alimentos"}]},{"id":"q43c","Question":"¿Con que frecuencia tienen reuniones?","Kind":"MC","Other":false,"Answers":[{"Answer":"Semanal"},{"Answer":"Mensual"}]},{"id":"q44","Question":"Usted, ¿Qué tan seguro se siente en este lugar?","Kind":"MC","Other":false,"Answers":[{"Answer":"Seguro","Jump":"q45"},{"Answer":"Medio seguro"},{"Answer":"Inseguro"}]},{"id":"q44a","Question":" ¿Por qué?","Kind":"OT"},{"id":"q45","Question":"¿Cómo percibes la seguridad en este lugar?","Kind":"MC","Other":false,"Answers":[{"Answer":"Buena","Jump":"q46a"},{"Answer":"Regular"},{"Answer":"Pésima"}]},{"id":"q46","Question":"¿Por qué regular o pésima?","Kind":"MC","Other":true,"Jump":"q47","Answers":[{"Answer":"Por ausencia de patrullas"},{"Answer":"Por ausencia de policías o pie o en bicicleta"},{"Answer":"Ausencia de Policias en motocicleta"},{"Answer":"Por la presencia de grupos vandalicos "}]},{"id":"q46a","Question":"¿Por qué buena?","Kind":"MC","Other":true,"Answers":[{"Answer":"Por que hay patrullas"},{"Answer":"Por la presencia de policias a pie o en bicicleta"},{"Answer":"Presencia de policia en bicicleta"}]},{"id":"q47","Question":"¿Se organizan para que ustedes mismos vigilen su calle?","Kind":"MC","Other":false,"Answers":[{"Answer":"Sí"},{"Answer":"No","Jump":"q48"}]},{"id":"q47a","Question":"¿Cómo se organizan?","Kind":"CB","Other":true,"Answers":[{"Answer":"Hacen guardias"},{"Answer":"Hacen rondines"},{"Answer":"Ponen alarmas"}]}]},{"Chapter":"Riesgos y amenazas","Questions":[{"id":"q48","Question":"¿Que tipo de riesgos tienen en esta zona?","Kind":"CB","Other":true,"Answers":[{"Answer":"Inundaciones"},{"Answer":"Deslizamiento de tierra"},{"Answer":"Incendios forestales"},{"Answer":"Desalojos"},{"Answer":"Ninguno"}]},{"id":"q49","Question":"¿A que riesgo se siente más vulnerable?","Kind":"CB","Other":true,"Answers":[{"Answer":"Inundaciones"},{"Answer":"Deslizamiento de tierra"},{"Answer":"Incendios forestales"},{"Answer":"Desalojos"},{"Answer":"Infraestructura física"},{"Answer":"Ninguno"}]},{"id":"q50","Question":"¿Que tipo de obras se han llevado a cabo para mejorar este lugar contra los riesgos?","Kind":"CB","Other":true,"Answers":[{"Answer":"Poner muros de contención"},{"Answer":"Costaleras"},{"Answer":"Lonas antiderrumbes"},{"Answer":"Ninguna"}]},{"id":"q51","Question":"¿Como las han logrado?","Kind":"CB","Other":true,"Answers":[{"Answer":"Acciones individuales y familiares"},{"Answer":"Obras vecinales/comunitarias"},{"Answer":"Obras del Gobierno delegacional"}]}]},{"Chapter":"Calidad de la vivienda","Questions":[{"id":"q52","Question":"(Indique el tipo de material predominante con el que esta construidas las siguientes partes de la vivienda:)Piso (primer nivel)","Kind":"MC","Other":true,"Answers":[{"Answer":"Tierra o firme"},{"Answer":"Cemento"},{"Answer":"Madera o mosaico"}]},{"id":"q53","Question":"Paredes (primer nivel)","Kind":"MC","Other":true,"Answers":[{"Answer":"Carton o madera"},{"Answer":"Piedra o adobe"},{"Answer":"Concreto o cemento"},{"Answer":"Tabicon o tabique"}]},{"id":"q53a","Question":"Techo","Kind":"MC","Other":true,"Answers":[{"Answer":"Carton o madera"},{"Answer":"Lámina de asbesto o metálica"},{"Answer":"Loza de concreto, tabique, teja"}]},{"id":"q54","Question":"Recubrimiento","Kind":"MC","Other":true,"Answers":[{"Answer":"Sin acabado"},{"Answer":"Cal o pintura sobre tabique"},{"Answer":"Aplanado con yeso"}]},{"id":"q55","Question":"Tiene ventanas","Kind":"MC","Other":false,"Answers":[{"Answer":"Ningun cuarto tiene"},{"Answer":"Solo algunos cuartos"},{"Answer":"Todos los cuartos tienen"}]},{"id":"q56","Question":"¿Cuántos niveles o pisos tiene la vivienda?","Kind":"ON"},{"id":"q57","Question":"¿Con que material están divididas las habitaciones de su vivienda?","Kind":"CB","Other":false,"Answers":[{"Answer":"Telas-plastico"},{"Answer":"Cartón"},{"Answer":"Madera"},{"Answer":"Tabicon o tabique"},{"Answer":"Tablaroca"}]},{"id":"q58","Question":"Esta vivienda tiene:","Kind":"CB","Other":false,"Answers":[{"Answer":"Lavadero"},{"Answer":"Regadera"},{"Answer":"Tinaco en la azotea"},{"Answer":"Cisterna o aljibe"},{"Answer":"Calentador o boiler"},{"Answer":"Bomba de agua"}]},{"id":"q59","Question":"Este hogar cuenta con:","Kind":"CB","Other":false,"Answers":[{"Answer":"Línea telefónica fija","Jump":"q60"},{"Answer":"Radio","Jump":"q60"},{"Answer":"Televisión blanco y negro","Jump":"q60"},{"Answer":"Televisión color","Jump":"q60"},{"Answer":"Televisión por cable","Jump":"q60"},{"Answer":"DVD","Jump":"q60"},{"Answer":"Horno de microondas","Jump":"q60"},{"Answer":"Refrigerador","Jump":"q60"},{"Answer":"Estufa de gas o eléctrica","Jump":"q60"},{"Answer":"Lavadora","Jump":"q60"},{"Answer":"Computadora","Jump":"q60"}]},{"id":"q59a","Question":"¿Esta vivienda cuenta con INTERNET?","Kind":"CB","Other":false,"Answers":[{"Answer":"Si"},{"Answer":"No","Jump":"q60"}]},{"id":"q59b","Question":"En promedio, ¿Cuánto paga al mes por el servicio de internet?($)","Kind":"ON"},{"id":"q60","Question":"¿Cuántas habitaciones tiene esta vivienda, sin contar cocina y baños?","Kind":"ON"}]},{"Chapter":"Número de personas por habitación","Questions":[{"id":"q61","Question":"De esas habitaciones, ¿Cuántas utiliza exclusivamente para dormir?","Kind":"LP","Questions":[{"id":"q61a","Question":"¿Cuántas personas duermen en la habitación?","Kind":"ON"}]}]},{"Chapter":"Vivienda","Questions":[{"id":"q62","Question":"¿Tiene baño esta vivienda?","Kind":"CB","Other":false,"Answers":[{"Answer":"Sí, afuera exclusivo"},{"Answer":"Sí, afuera compartido"},{"Answer":"Sí, adentro exclusivo"},{"Answer":"Sí, adentro compartido"},{"Answer":"No tiene"}]},{"id":"q63","Question":"¿Su vivienda cuenta con cocina separada de las demás habitaciones?","Kind":"MC","Other":false,"Answers":[{"Answer":"Sí"},{"Answer":"No"},{"Answer":"No, se encuentra en el mismo cuarto donde se duerme"}]}]},{"Chapter":"Residencia anterior","Questions":[{"id":"q64","Question":"Antes de vivir aquí,¿Dónde vivía?","Kind":"MC","Other":false,"Answers":[{"Answer":"Misma Delegación (Colonia o pueblo)","Jump":"q64c"},{"Answer":"Fuera de la Delegación (Delegación y colonia)","Jump":"q64b"},{"Answer":"Fuera del D.F. (Estado, ciudad y municipio)"},{"Answer":"Siempre ha vivido en la misma vivienda","Jump":"q70a"},{"Answer":"En el mismo asentamiento","Jump":"q70a"}]},{"id":"q64a","Question":"Estado","Kind":"MC","Answers":[{"Answer":"Aguascalientes"},{"Answer":"Baja California"},{"Answer":"Baja California Sur"},{"Answer":"Campeche"},{"Answer":"Coahuila de Zaragoza"},{"Answer":"Colima"},{"Answer":"Chiapas"},{"Answer":"Chihuahua"},{"Answer":"Distrito Federal"},{"Answer":"Durango"},{"Answer":"Guanajuato"},{"Answer":"Guerrero"},{"Answer":"Hidalgo"},{"Answer":"Jalisco"},{"Answer":"México"},{"Answer":"Michoacán de Ocampo"},{"Answer":"Morelos"},{"Answer":"Nayarit"},{"Answer":"Nuevo León"},{"Answer":"Oaxaca"},{"Answer":"Puebla"},{"Answer":"Querétaro"},{"Answer":"Quintana Roo"},{"Answer":"San Luis Potosí"},{"Answer":"Sinaloa"},{"Answer":"Sonora"},{"Answer":"Tabasco"},{"Answer":"Tamaulipas"},{"Answer":"Tlaxcala"},{"Answer":"Veracruz"},{"Answer":"Yucatán"},{"Answer":"Zacatecas"}]},{"id":"q64b","Question":"Delegación o Municipio","Kind":"MC","Other":true,"Answers":[{"Answer":"Azcapotzalco"},{"Answer":"Coyoacán"},{"Answer":"Cuajimalpa"},{"Answer":"Gustavo A. Madero"},{"Answer":"Iztacalco"},{"Answer":"Iztapalapa"},{"Answer":"Magdalena Contreras"},{"Answer":"Milpa Alta"},{"Answer":"Álvaro Obregón"},{"Answer":"Tláhuac"},{"Answer":"Tlalpan"},{"Answer":"Xochimilco"},{"Answer":"Benito Juárez"},{"Answer":"Cuauhtémoc"},{"Answer":"Miguel Hidalgo"},{"Answer":"Venustiano Carranza"},{"Answer":"Tizayuca"},{"Answer":"Acolman"},{"Answer":"Amecameca"},{"Answer":"Apaxco"},{"Answer":"Atenco"},{"Answer":"Atizapán de Zaragoza"},{"Answer":"Atlautla"},{"Answer":"Axapusco"},{"Answer":"Ayapango"},{"Answer":"Coacalco de Berriozábal"},{"Answer":"Cocotitlán"},{"Answer":"Coyotepec"},{"Answer":"Cuautitlán"},{"Answer":"Chalco"},{"Answer":"Chiautla"},{"Answer":"Chicoloapan"},{"Answer":"Chiconcuac"},{"Answer":"Chimalhuacán"},{"Answer":"Ecatepec de Morelos"},{"Answer":"Ecatzingo"},{"Answer":"Huehuetoca"},{"Answer":"Hueypoxtla"},{"Answer":"Huixquilucan"},{"Answer":"Isidro Fabela"},{"Answer":"Ixtapaluca"},{"Answer":"Jaltenco"},{"Answer":"Jilotzingo"},{"Answer":"Juchitepec"},{"Answer":"Melchor Ocampo"},{"Answer":"Naucalpan de Juárez"},{"Answer":"Nezahualcóyotl"},{"Answer":"Nextlalpan"},{"Answer":"Nicolás Romero"},{"Answer":"Nopaltepec"},{"Answer":"Otumba"},{"Answer":"Ozumba"},{"Answer":"Papalotla"},{"Answer":"La Paz"},{"Answer":"San Martín de las Pirámides"},{"Answer":"Tecámac"},{"Answer":"Temamatla"},{"Answer":"Temascalapa"},{"Answer":"Tenango del Aire"},{"Answer":"Teoloyucan"},{"Answer":"Teotihuacán"},{"Answer":"Tepetlaoxtoc"},{"Answer":"Tepetlixpa"},{"Answer":"Tepotzotlán"},{"Answer":"Tequixquiac"},{"Answer":"Texcoco"},{"Answer":"Tezoyuca"},{"Answer":"Tlalmanalco"},{"Answer":"Tlalnepantla de Baz"},{"Answer":"Tultepec"},{"Answer":"Tultitlán"},{"Answer":"Tonanitla"},{"Answer":"Villa del Carbón"},{"Answer":"Zumpango"},{"Answer":"Cuautitlán Izcalli"},{"Answer":"Valle de Chalco Solidaridad"}]},{"id":"q64c","Question":"Colonia o Pueblo","Kind":"OT"},{"id":"q65","Question":"¿Cuánto tiempo vivió en ese lugar?(años)","Kind":"ON"},{"id":"q66","Question":"Tipo de tenencia de la vivienda anterior:","Kind":"MC","Other":true,"Answers":[{"Answer":"Propia","Jump":"q67"},{"Answer":"Rentada"},{"Answer":"Familiar","Jump":"q67"},{"Answer":"Prestada","Jump":"q67"}]},{"id":"q66a","Question":"¿Cuál era el costo mensual?($)","Kind":"ON"},{"id":"q67","Question":"¿Cuales son las principales razones por las cuales decidió cambiarse a esta vivienda?","Kind":"CB","Other":true,"Answers":[{"Answer":"Porque puedo acceder fácilmente al transporte"},{"Answer":"Presencia de servicios públicos"},{"Answer":"Porque es mas seguro"},{"Answer":"Porque pago menos de renta"},{"Answer":"Cercanía al trabajo"},{"Answer":"Se hizo de una propiedad"}]},{"id":"q68","Question":"Considera que sus condiciones de vida, desde que llego a vivir a este lugar, han:","Kind":"MC","Other":false,"Answers":[{"Answer":"Mejorado"},{"Answer":"Siguen igual"},{"Answer":"Han empeorado"}]},{"id":"q69","Question":"¿Por qué?","Kind":"OT"}]},{"Chapter":"Políticas de atención a la vivienda","Questions":[{"id":"q70a","Question":"¿Recibe algun programa de ayuda por parte del gobierno?","Kind":"MC","Other":false,"Answers":[{"Answer":"Sí"},{"Answer":"No","Jump":"q77"}]},{"id":"q70a1","Question":"¿Cuáles?","Kind":"CB","Other":false,"Answers":[{"Answer":"Oportunidades"},{"Answer":"Diconsa"},{"Answer":"Apoyo Alimentario"},{"Answer":"Empleo temporal"},{"Answer":"Jornaleros Agrícolas"},{"Answer":"Liconsa"},{"Answer":"Hábitat"},{"Answer":"70 y más"},{"Answer":"Opciones productivas"},{"Answer":"Tu Casa"},{"Answer":"DZP Piso firme"},{"Answer":"Apoyo Económico a Personas con Discapacidad"},{"Answer":"Becas escolares"},{"Answer":"Educación garantizada"},{"Answer":"Desayunos escolares"},{"Answer":"Pensión Adultos mayores"},{"Answer":"Desayunos escolares"},{"Answer":"Prepa Sí"},{"Answer":"Uniformes y útiles escolares"},{"Answer":"Mejoramiento de vivienda"},{"Answer":"Niños Talento"},{"Answer":"Seguro de desempleo"},{"Answer":"Acceso Servicios Médicos"}]},{"id":"q74","Question":"En general, ¿Se siente satisfecho o insatisfecho con los beneficios sociales que recibe?","Kind":"MC","Other":false,"Answers":[{"Answer":"Satisfecho"},{"Answer":"Insatisfecho"},{"Answer":"Indiferente "}]},{"id":"q77","Question":"¿Su colonia recibe apoyo de algún partido?","Kind":"MC","Other":false,"Answers":[{"Answer":"Sí"},{"Answer":"No 78","Jump":"q80"}]},{"id":"q77a","Question":"¿Qué tipo de apoyo?","Kind":"OT"}]},{"Chapter":"Servicios de Salud","Questions":[{"id":"q80","Question":"¿A qué tipo de servicio de salud acude cuando se enferma algún miembro de la familia?","Kind":"MC","Other":false,"Answers":[{"Answer":"Público"},{"Answer":"Privado"},{"Answer":"Consultorios médicos en farmacias"}]},{"id":"q82","Question":"¿Dónde se encuentra localizado el servicio de salud que utiliza frecuentemente?","Kind":"MC","Other":false,"Answers":[{"Answer":"Dentro de su colonia"},{"Answer":"Fuera de su colonia"}]},{"id":"q84a","Question":"La atención que recibe es?","Kind":"MC","Other":false,"Answers":[{"Answer":"Buena 79b","Jump":"q84c"},{"Answer":"Mala"},{"Answer":"Indiferente"}]},{"id":"q84c","Question":"¿El personal fue amable?","Kind":"MC","Other":false,"Answers":[{"Answer":"Sí"},{"Answer":"No"}]},{"id":"q84d","Question":"¿Le atendieron rápido?","Kind":"MC","Other":false,"Answers":[{"Answer":"Sí"},{"Answer":"No"}]},{"id":"q84e","Question":"¿Había medicamentos disponibles?","Kind":"MC","Other":false,"Answers":[{"Answer":"Sí 82","Jump":"q84g"},{"Answer":"No"}]},{"id":"q84g","Question":"Por lo general, ¿Cuánto gasta en la consulta médica?($)","Kind":"ON"},{"id":"q84h","Question":"¿Cuánto gasta en medicamentos?($)","Kind":"ON"}]},{"Chapter":"Mercado","Questions":[{"id":"q85","Question":"¿Dónde se abastecen de alimentos?","Kind":"CB","Other":true,"Answers":[{"Answer":"Tienda de abarrotes"},{"Answer":"Tiendas de conveniencia"},{"Answer":"Tianguis"},{"Answer":"Mercado público"},{"Answer":"Supermercado"},{"Answer":"Cultivo para autoconsumo"}]},{"id":"q86","Question":"¿Dónde está ubicado el lugar en el que compran frecuentemente sus alimentos?","Kind":"MC","Other":false,"Answers":[{"Answer":"Dentro de su colonia"},{"Answer":"Fuera de su colonia"}]},{"id":"q89","Question":"¿Cuánto tiempo emplea para llegar?(min)","Kind":"ON"},{"id":"q90a","Question":"¿Utiliza algún medio de transporte para acudir al lugar?","Kind":"MC","Other":false,"Answers":[{"Answer":"Sí"},{"Answer":"No","Jump":"q91"}]},{"id":"q90b","Question":"¿Cuál?","Kind":"OT"}]},{"Chapter":"Recreación","Questions":[{"id":"q91","Question":"¿Cuáles son los principales lugares a los que va a divertirse?","Kind":"CB","Other":true,"Answers":[{"Answer":"Cine/Teatro"},{"Answer":"Casas de cultura"},{"Answer":"Museos"},{"Answer":"Parques/Plazas"},{"Answer":"Centros comerciales"},{"Answer":"Ferias"},{"Answer":"Antros/Bares/Pulquerías"},{"Answer":"Fiestas familiares"}]},{"id":"q93","Question":"Cada vez que sale a divertirse, ¿Cuánto gasta en promedio?($)","Kind":"ON"}]},{"Chapter":"Gasto Familiar","Questions":[{"id":"q94","Question":"¿Le alcanza para vivir bien?","Kind":"MC","Other":false,"Answers":[{"Answer":"Sí me alcanza"},{"Answer":"Apenas me alcanza"},{"Answer":"No me alcanza"}]},{"id":"q95","Question":"De más a menos, ¿en qué gasta más? (Ordene de arriba hacia abajo)","Kind":"OL","Other":false,"Answers":[{"Answer":"Alimentación"},{"Answer":"Salud"},{"Answer":"Educación"},{"Answer":"Vivienda"},{"Answer":"Servicios de la vivienda (gas, luz, teléfono. etc.)"},{"Answer":"Vestimenta"},{"Answer":"Recreación"},{"Answer":"Transporte"}]}]},{"Chapter":"Datos del jefe de familia y Composición Familiar","Questions":[{"id":"q99","Question":"¿Cuantos integrantes componen su familia?","Kind":"LP","Questions":[{"id":"q99a","Question":"Parentesco con Jefe de Familia","Kind":"MC","Other":true,"Answers":[{"Answer":"Jefe de familia"},{"Answer":"Esposa (o)"},{"Answer":"Hijo (a)"},{"Answer":"Padre/Madre"},{"Answer":"Suegro (a)"},{"Answer":"Abuelo (a)"},{"Answer":"Hermano/a"},{"Answer":"Cuñado (a)"},{"Answer":"Yerno/ Nuera"},{"Answer":"Nieto (a)"},{"Answer":"Amigo"}]},{"id":"q99b","Question":"Sexo","Kind":"MC","Other":false,"Answers":[{"Answer":"Hombre"},{"Answer":"Mujer"}]},{"id":"q99c","Question":"Edad","Kind":"ON"},{"id":"q99d","Question":"¿En dónde nació","Kind":"OT"},{"id":"q99p","Question":"Ocupación","Kind":"MC","Other":true,"Answers":[{"Answer":"Estudia"},{"Answer":"Trabaja"},{"Answer":"Ama de casa"},{"Answer":"Jubilado o pensionado"},{"Answer":"Desempleado"}]},{"id":"q99f","Question":"Escolaridad ¿Hasta qué año estudio?","Kind":"MC","Other":true,"Answers":[{"Answer":"Sin estudios"},{"Answer":"Preescolar"},{"Answer":"Primaria"},{"Answer":"Secundaria"},{"Answer":"Bachillerato o Carrera Técnica"},{"Answer":"Licenciatura"},{"Answer":"Posgrado"}]},{"id":"q99g","Question":"Año nivel terminado","Kind":"ON"},{"id":"q99r","Question":"En su trabajo principal, ¿qué tipo de contratación tiene?","Kind":"MC","Other":true,"Answers":[{"Answer":"Temporal o por obra"},{"Answer":"De base o por tiempo  indefinido"},{"Answer":"Autoempleo"},{"Answer":"No tiene contrato"}]},{"id":"q99s","Question":"¿Cuántas horas al día dedica a su ocupación?","Kind":"MC","Other":true,"Answers":[{"Answer":"menos de 4"},{"Answer":"de 4 a 6 hrs."},{"Answer":"de 7 a 10 hrs."},{"Answer":"más de 10"}]},{"id":"q99t","Question":"Ingreso ¿Cuánto gana o recibe por su trabajo mensualmente?","Kind":"MC","Other":true,"Answers":[{"Answer":"Menos de 1 S.M.  (menos de $1942.8)"},{"Answer":"$1942.8 a $3885.6"},{"Answer":"$3885.6 a $5826"},{"Answer":"$5826 a $9710"},{"Answer":"más de $9710"}]},{"id":"q99u","Question":"¿En su trabajo o negocio principal, qué tipo de prestaciones tiene aunque no las utilice?","Kind":"CB","Other":true,"Answers":[{"Answer":"Aguinaldo"},{"Answer":"Vacaciones con goce  de sueldo"},{"Answer":"SAR o AFORE"},{"Answer":"Crédito para vivienda"},{"Answer":"Seguro de vida"},{"Answer":"Guarderías o estancias"},{"Answer":"IMSS, ISSSTE, ISSSEMyM"},{"Answer":"Vales de despensa"},{"Answer":"Ninguna"}]},{"id":"q99v","Question":"¿Percibe otros ingresos?","Kind":"MC","Other":true,"Answers":[{"Answer":"Sí"},{"Answer":"No"}]},{"id":"q99w","Question":"¿De qué forma?","Kind":"MC","Other":true,"Answers":[{"Answer":"Jubilaciones y/o  pensiones"},{"Answer":"Ayuda de familiares desde otro país"},{"Answer":"Ayuda de familiares  dentro del país (no  dentro del hogar)"},{"Answer":"Negocio propio"}]},{"id":"q78","Question":"¿Tiene derecho su familia a los servicios de salud de alguna institución pública o privada?","Kind":"CB","Other":false,"Answers":[{"Answer":"IMSS"},{"Answer":"ISSSTE"},{"Answer":"Seguro Popular"},{"Answer":"Servicio de salud del GDF"},{"Answer":"Privado"},{"Answer":"No tiene"}]}]}]},{"Chapter":"Estrategias de sobrevivencia","Questions":[{"id":"q101","Question":"¿Alguna vez ha recibido algún crédito o préstamo por parte de alguna empresa o institución?","Kind":"MC","Other":false,"Answers":[{"Answer":"Sí"},{"Answer":"No","Jump":"q104a"}]},{"id":"q101a","Question":"¿De cuál?","Kind":"OT"},{"id":"q102","Question":"¿Para que utilizó el préstamo?","Kind":"CB","Other":false,"Answers":[{"Answer":"Comprar una casa"},{"Answer":"Mejorar la casa"},{"Answer":"Comprar cosas para la casa"},{"Answer":"Poner un negocio"},{"Answer":"Comprar cosas para el negocio"},{"Answer":"Comprar automóvil"},{"Answer":"Comprar ropa o cosas personales"},{"Answer":"Para pagar otras deudas"}]},{"id":"q103","Question":"¿El préstamo o crédito...","Kind":"MC","Other":true,"Answers":[{"Answer":"Mejoró su situación?"},{"Answer":"Mejoró su situación sólo en parte?"},{"Answer":"Empeoró su situación?"},{"Answer":"Quedó endeudada(o)?"}]}]},{"Chapter":"Redes y participación social","Questions":[{"id":"q104a","Question":"Actualmente cuenta con familiares, amigos o vecinos que pudieran ayudarlo:¿Para obtener un trabajo?","Kind":"MC","Other":false,"Answers":[{"Answer":"Familiares"},{"Answer":"Amigos"},{"Answer":"Vecinos"},{"Answer":"No"}]},{"id":"q104b","Question":"¿Para posibilitar la atención médica o el ingreso a la escuela?","Kind":"MC","Other":false,"Answers":[{"Answer":"Familiares"},{"Answer":"Amigos"},{"Answer":"Vecinos"},{"Answer":"No"}]},{"id":"q104c","Question":"¿Para obtener préstamos o acceso a créditos?","Kind":"MC","Other":false,"Answers":[{"Answer":"Familiares"},{"Answer":"Amigos"},{"Answer":"Vecinos"},{"Answer":"No"}]},{"id":"q104d","Question":"¿En el cuidado de algún miembro del hogar al estar enfermo?","Kind":"MC","Other":false,"Answers":[{"Answer":"Familiares"},{"Answer":"Amigos"},{"Answer":"Vecinos"},{"Answer":"No"}]},{"id":"q104e","Question":"Si tuviera que salir y no pudiera llevar con usted a su(s) hijo(s), ¿a quién recurriría?","Kind":"MC","Other":true,"Answers":[{"Answer":"Familiar miembro del hogar"},{"Answer":"Familiar no miembro del hogar"},{"Answer":"Amigo o vecino"},{"Answer":"Empleada doméstica o niñera"},{"Answer":"No tiene a quién recurrir"}]},{"id":"q104f","Question":"Cuando no tiene dinero, ¿A quien le pide prestado?","Kind":"MC","Other":true,"Answers":[{"Answer":"Familiar"},{"Answer":"Amigo o vecino"},{"Answer":"Algún miembro del hogar"},{"Answer":"No tiene a quién recurrir"}]},{"id":"q105","Question":"¿A usted, le han pedido apoyo o dinero para ayudar a algún vecino?","Kind":"MC","Other":false,"Answers":[{"Answer":"Sí"},{"Answer":"No"}]},{"id":"q106","Question":"¿Usted confía en sus vecinos?","Kind":"MC","Other":false,"Answers":[{"Answer":"En todos"},{"Answer":"En la mayoría"},{"Answer":"En algunos"},{"Answer":"En ninguno"}]},{"id":"q112","Question":"En su opinión, ¿Las autoridades hacen algo por su colonia?","Kind":"MC","Other":false,"Answers":[{"Answer":"Sí"},{"Answer":"No"},{"Answer":"A veces"}]},{"id":"q113","Question":"En su opinión, ¿Quién debe ser el principal responsable del mejoramiento de su comunidad (colonia, etc.)?","Kind":"MC","Other":true,"Answers":[{"Answer":"El gobierno de la ciudad"},{"Answer":"El gobierno federal"},{"Answer":"La gente de la comunidad"},{"Answer":"Los tres"},{"Answer":"Ninguno de los tres"}]},{"id":"q114","Question":"¿Cuáles son los tres principales problemas para su familia?","Kind":"CB","Other":true,"Answers":[{"Answer":"La salud"},{"Answer":"La vivienda"},{"Answer":"La falta de trabajo"},{"Answer":"La alimentación"},{"Answer":"La educación"},{"Answer":"La violencia"},{"Answer":"Falta de agua"},{"Answer":"Los pleitos"},{"Answer":"La inseguridad"},{"Answer":"La falta de dinero"},{"Answer":"La pobreza"}]},{"id":"q115","Question":"¿Cuáles son los tres problemas mas graves en su comunidad?","Kind":"CB","Other":true,"Answers":[{"Answer":"Falta de alumbrado público"},{"Answer":"Falta de pavimentación"},{"Answer":"Violencia o inseguridad"},{"Answer":"Falta de escuelas"},{"Answer":"Falta de hospitales"},{"Answer":"Falta de mercados"},{"Answer":"Falta de drenaje"},{"Answer":"Falta de transporte"}]},{"id":"q116","Question":"¿Qué hacen cuando las autoridades no resuelven un problema de la comunidad?","Kind":"CB","Other":true,"Answers":[{"Answer":"Siguen insistiendo"},{"Answer":"Ustedes se organizan para resolverlos"},{"Answer":"Organizan bloqueos y marchas"},{"Answer":"Acuden a los medios de comunicación"},{"Answer":"Acuden a otras autoridades"},{"Answer":"Acuden a un partido político"},{"Answer":"Acuden a otras organizaciones"},{"Answer":"No hacen nada"}]}]},{"Chapter":"Percepción","Questions":[{"id":"q118","Question":"¿Es usted feliz en este asentamiento?","Kind":"MC","Other":false,"Answers":[{"Answer":"Si"},{"Answer":"No"}]},{"id":"q119","Question":"¿Por qué?","Kind":"OT"},{"id":"q120","Question":"¿Cuándo no hay ingresos como se siente el ambiente familiar?","Kind":"CB","Other":true,"Answers":[{"Answer":"Preocupación"},{"Answer":"Desesperación "},{"Answer":"Tristeza"},{"Answer":"Enfermizo"},{"Answer":"Fracasado"},{"Answer":"Depresivo"}]}]},{"Chapter":"Datos de identificación","Questions":[{"id":"q01","Question":"Calle/avenida/callejón/carretera/camino","Kind":"OT"},{"id":"q02","Question":"Número exterior","Kind":"OT"},{"id":"q03","Question":"Numero Interior","Kind":"OT"},{"id":"q03","Question":"Colonia/Fraccionamiento/Barrio/Unidad Habitacional/Callejón","Kind":"OT"},{"id":"q121","Question":"Pide permiso para tomar una foto a la vivienda","Kind":"IM"}]}],"TableID":"1bwfAM9bUfyltBFPwB7aOH3NpKe_hdKeXZV5OXQ8I"},"Tracker":{"Questions":[{"id":"q1","Question":"Trayecto","Kind":"MC","Other":true,"Answers":[{"Answer":"1"},{"Answer":"2"},{"Answer":"3"},{"Answer":"4"},{"Answer":"5"}]}],"TableID":"1vzopSYni3SvcQNgY6fpSk0VaLCV_0HXWPl0ia6qa"}}'
    	var projectTest = new project();
    	projectTest.constructFromString(superString);
    	console.log(JSON.stringify(projectTest.generateJSON()));

    	var projectView = new projectView(projectTest);
    	var container = document.getElementById("project_container");
    	container.appendChild(projectView.getView());

    	// Here we put the ux elements
    	// Only constructors to apply the bootstrap classes and to change the format quickly.
    	function button(kind, nodeClass, text){
    		var button = document.createElement("button");;
    		if(kind == "add"){
    			button.className =  "btn btn-primary btn-sm" + " " + nodeClass;
    			button.innerHTML = '<span class="glyphicon glyphicon-plus"></span> ' + text;
    		} else if (kind == "remove"){
    			button.className =  "btn btn-danger btn-xs" + " " + nodeClass;
    			button.innerHTML = '<span class="glyphicon glyphicon-remove"></span> ' + text;
    		} else {
    			button.className =  "btn btn-default btn-sm"+ " " + nodeClass;
    			button.innerHTML = " " + text + "XX";
    		}
    		return button;
    	}
    	function select(kind, nodeClass, dropdownTextArray, dropdownValueArray){
    		this.kind = kind;
    		this.nodeClass = nodeClass;
    		this.dropdownTextArray = dropdownTextArray;
    		var select = document.createElement("select");
    		select.className = "form-control" + " " + nodeClass;
    		for (var i=0; i < dropdownTextArray.length; i++){
    			option = document.createElement("option");
    			option.value = dropdownValueArray[i];
    			option.innerHTML = dropdownTextArray[i];
    			select.appendChild(option);
    		}
    		return select;
    	}
    	function checkbox(kind, labelText, nodeClass){
    		this.checkbox = document.createElement("input");
			this.checkbox.type = "checkbox";
			this.checkbox.className = "bootstrap-switch" + " " + nodeClass;
    		this.addTo = function(div){
    			var that = this;
    			div.appendChild(this.checkbox);
    			$(this.checkbox).bootstrapSwitch("labelText", labelText);
    		};
    		this.removeFrom = function(div){
    			this.checkbox.name = "switch-to-remove";
    			$(this.checkbox).bootstrapSwitch('destroy');
    			this.checkbox.name = "";
    			div.removeChild(this.checkbox);
    		}
    		this.isChecked = function(){
    			return this.checkbox.checked;
    		}
    		this.getView = function(){
    			return this.checkbox;
    		}
    		this.toggleState = function(){
    			$(this.checkbox).bootstrapSwitch('toggleState');
    		}
    		this.setCheckedState = function(state){
    			if(this.checkbox.checked != state){
    				this.toggleState();
    			}
    		}

    	}
    	// Here be the Views
    	// !!/!T(&"#("/!(/T#")(/!=)/"=)(!)(YEU!")/H)"(UWE=")!"(!=)(!=#)(=))))
		function projectView(project){			
			this.initializeView = function(){
				this.div = document.createElement('div');
				this.div.className = "project";
				this.div.id = "project";
				this.floatDiv = document.getElementById('JsonGoesHere');
				this.jsonText = document.createElement("div");
				this.jsonText.style.cssText = 'font-size:0.75em';
				this.floatDiv.appendChild(this.jsonText)
			}
			this.updateContent = function(project){
				this.project = project;
				if (this.project.getSurvey() != null){
					this.surveyView = new surveyView(this.project.getSurvey(), this);
				} else {
					this.surveyView = new surveyView(new survey(), this);
				}
				if (this.project.getTracker() != null){
					this.trackerView = new trackerView(this.project.getTracker(), this);
				} else {
					this.trackerView = new trackerView(new tracker(), this);
				}
				while (this.div.firstChild){
					this.div.removeChild(this.div.firstChild);
				}				
				this.div.appendChild(this.surveyView.getView());
				this.div.appendChild(this.trackerView.getView());			
			}
			this.getView = function(){
				return this.div;
			};
			this.contentChanged = function(){
				this.project.setSurvey(this.surveyView.getSurvey());
				this.project.setTracker(this.trackerView.getTracker());
				this.contentChanges++;
				this.jsonText.innerHTML = "<b>Input Modification Count:</b> " + this.contentChanges + " <br><br><b>JSON Output:</b><br>" + JSON.stringify(project.generateJSON());
			};
			this.project = project;
			this.contentChanges = -1;
			this.initializeView();
			this.updateContent(this.project);
			this.contentChanged();
		}
		function surveyView(survey, parentView){
         	this.initializeView = function(){
         		this.div = document.createElement('div');
         		this.div.className = "survey";
         		var that = this;
         		this.addChapterButton = new button("add", "", "Add chapter");
         		this.addChapterButton.onclick = function(){
         			that.addChapter(new chapter());
         			that.contentChanged();
         		};
         		this.fusionTableIDInput = document.createElement("input");
         		this.fusionTableIDInput.type = "text";
         		this.fusionTableIDInput.className = "form-control"
         		this.fusionTableIDInput.oninput=function(){
         			that.contentChanged();
         		};
         		this.chaptersArrayContainerDiV = document.createElement('div');
         		this.chaptersArrayContainerDiV.className = "chaptersArrayContainerDiV";
         		this.chaptersContainerDIV = document.createElement('div');
         		this.chaptersContainerDIV.className = "chaptersContainerDIV";
         		this.chaptersContainerDIV.appendChild(this.chaptersArrayContainerDiV);
         		this.chaptersContainerDIV.appendChild(this.addChapterButton);
         		this.div.appendChild(this.fusionTableIDInput);
         		this.div.appendChild(this.chaptersContainerDIV);
         	}
         	this.updateContent = function(survey){
         		this.survey = survey;
         		if (this.fusionTableIDInput.value != this.survey.getfusionTableID()){
         			this.fusionTableIDInput.value = this.survey.getfusionTableID();
         		}
         		if (this.chapters != this.survey.getChapters()){	
         			this.chapterViews = [];
         			while (this.chaptersArrayContainerDiV.firstChild){
         				this.chaptersArrayContainerDiV.removeChild(this.chaptersArrayContainerDiV.firstChild);
         			}
         			this.chapters = this.survey.getChapters();
         			for (var i = 0; i < this.chapters.length; i++) {
         				this.addChapter(this.chapters[i]);
         			};
         		}
         	}	
			this.getView = function(){
				return this.div;
			}
			this.addChapter = function(chapter){	
				var chapterContainerDIV = document.createElement('div');
         		chapterContainerDIV.className = "chapterContainerDIV";
				var newChapterView = new chapterView(chapter, this);
				this.chapterViews.push(newChapterView);
				var newChapterDIV = newChapterView.getView();
				var eraseChapterButton = new button("remove", "", "Erase chapter");
				var that = this;
				chapterContainerDIV.appendChild(eraseChapterButton);
				chapterContainerDIV.appendChild(newChapterDIV);
				this.chaptersArrayContainerDiV.appendChild(chapterContainerDIV);
				eraseChapterButton.onclick = function(){
            		that.eraseChapter(chapterContainerDIV);
        		}
			}
			this.eraseChapter = function(chapterDIV){
				var parentChilds = chapterDIV.parentNode.childNodes;
				for (var i=0; i < parentChilds.length; i++){
					if (parentChilds[i] == chapterDIV){
						this.chapterViews.splice(i,1);
						break
					}
				}
				this.chaptersArrayContainerDiV.removeChild(chapterDIV);
				this.contentChanged();
			}
			this.contentChanged = function(){
				var changedChapters = [];
				for(i=0; i<this.chapterViews.length; i++){
					changedChapters[i] = this.chapterViews[i].getChapter();
				}
				this.survey.setChapters(changedChapters);
				this.survey.setfusionTableID(this.fusionTableIDInput.value);
				this.parentView.contentChanged();
			};	
			this.getSurvey = function(){
				return this.survey;
			}
			this.parentView = parentView;
			this.survey = survey;
			this.chapterViews = []; // Instances of chapters
			this.div = null;
			this.addChapterButton = null;
			this.fusionTableIDInput = null;
			this.chaptersContainerDIV = null;
			this.chaptersArrayContainerDiV = null;
			this.initializeView();
			this.updateContent(this.survey);
		}
		function questionArrayView(questionArray, parentView, inLoop){
			this.initializeView = function(){
				this.div = document.createElement('div');
				this.div.className = "questionsContainerDIV";
				this.questionsArrayContainer = document.createElement('div');
				this.questionsArrayContainer.className = "questionsArrayContainer";
				this.addQuestionButton = new button("add", "", "Add question");
				var that = this;
				this.addQuestionButton.onclick = function(){
					that.addQuestion(new question(that.inLoop));
					that.contentChanged();
				};
				this.div.appendChild(this.questionsArrayContainer);
				this.div.appendChild(this.addQuestionButton);
			}
			this.updateContent = function(questionArray){
         		if (questionArray != this.getQuestions()){	
         			this.QuestionViews = [];
         			while (this.questionsArrayContainer.firstChild){
         				this.questionsArrayContainer.removeChild(this.questionsArrayContainer.firstChild);
         			}
         			this.questionArray = questionArray;
         			if(this.questionArray != null){
                  		for (var i = 0; i < this.questionArray.length; i++) {
         					this.addQuestion(this.questionArray[i]);
         				};				
         			}
         		}
			}
			this.addQuestion = function(question){
				var questionContainerDIV = document.createElement('div');
				questionContainerDIV.className = "questionContainerDIV";
				newQuestionView = new questionView(question, this, inLoop);
				this.questionViews.push(newQuestionView);
				var newQuestionDIV = newQuestionView.getView();
				var eraseQuestionButton = new button("remove", "", "Erase question");
				var that = this;
				questionContainerDIV.appendChild(eraseQuestionButton);
				questionContainerDIV.appendChild(newQuestionDIV);
				this.questionsArrayContainer.appendChild(questionContainerDIV);
				eraseQuestionButton.onclick = function(){
					that.eraseQuestion(questionContainerDIV);
				};
			};
			this.eraseQuestion = function(questionDIV){
				var parentChilds = questionDIV.parentNode.childNodes;
				for (var i=0; i < parentChilds.length; i++){
					if (parentChilds[i] == questionDIV){
						this.questionViews.splice(i,1);
						break
					};
				};
				this.questionsArrayContainer.removeChild(questionDIV);
				this.contentChanged();
			};
			this.contentChanged = function(){
				this.parentView.contentChanged();
			};	
			this.getView = function(){
				return this.div;
			}
			this.getQuestions = function(){
				this.questionArray = [];
				for(i=0; i<this.questionViews.length; i++){
					this.questionArray[i] = this.questionViews[i].getQuestion();
				};
				return this.questionArray;
			};
			this.inLoop = inLoop;
			this.questionArray = questionArray;
			this.parentView = parentView;
			this.questionViews = []; //Array of question Views objects
			this.initializeView();
			this.updateContent(this.questionArray);	
		};

		function answerArrayView(answerArray, parentView, canHaveJumps){
			this.initializeView = function(){
         		this.answerViews = []; //Array of question Views objects
				this.div = document.createElement('div');
				this.div.className = "answersContainerDIV";
				this.answersArrayContainer = document.createElement('div');
				this.answersArrayContainer.className = "this.answersArrayContainerDIV";
				this.addAnswerButton = new button("add", "", "Add answer");
				var that = this;
				this.addAnswerButton.onclick = function(){
					that.addAnswer(new answer());
					that.contentChanged();
	         	};
	         	this.div.appendChild(this.answersArrayContainer);
	         	this.div.appendChild(this.addAnswerButton);
	        }
	        this.updateContent = function(answerArray){
	        	if (answerArray != this.getAnswers()){	
         			this.AnswerViews = [];
         			while (this.answersArrayContainer.firstChild){
         				this.answersArrayContainer.removeChild(this.answersArrayContainer.firstChild);
         			}
         			this.answerArray = answerArray;
         			if(answerArray != null){
         				for (var i = 0; i < this.answerArray.length; i++) {
         					this.addAnswer(this.answerArray[i]);
         				};
         			}
         		}
			}         	
			this.addAnswer = function(answer){
				var answerContainerDIV = document.createElement('div');
         		answerContainerDIV.className = "answerContainerDIV";
				var newAnswerView = new answerView(answer, this, this.canHaveJumps);
				this.answerViews.push(newAnswerView);
				var newAnswerDIV = newAnswerView.getView();
				var eraseAnswerButton = new button("remove", "", "Erase answer");
				answerContainerDIV.appendChild(eraseAnswerButton);
				answerContainerDIV.appendChild(newAnswerDIV);
				this.answersArrayContainer.appendChild(answerContainerDIV);
				var that = this;
				eraseAnswerButton.onclick = function(){
            		that.eraseAnswer(answerContainerDIV);
            	};
			};
			this.eraseAnswer = function(answerDIV){
				var parentChilds = answerDIV.parentNode.childNodes;
				for (var i=0; i < parentChilds.length; i++){
					if (parentChilds[i] == answerDIV){
						this.answerViews.splice(i,1);
						break
					}
				}
				this.answersArrayContainer.removeChild(answerDIV);
				this.contentChanged();
			};
			this.contentChanged = function(){
				parentView.contentChanged();
			};	
			this.getView = function(){
				return this.div;
			}
			this.getAnswers = function(){
				var answers = [];
				for(i=0; i<this.answerViews.length; i++){
					answers[i] = this.answerViews[i].getAnswer();
				}
				return answers;
			}
			this.answerArray = answerArray;
			this.parentView = parentView;
			this.canHaveJumps = canHaveJumps;
			this.initializeView();
			this.updateContent(this.answerArray);
		}
		function answerView(answer, parentView, canHaveJump){
			this.initializeView = function(){
				this.div = document.createElement('div');
				this.div.className = "answer";
				var that = this;
				this.answerInput = document.createElement("input");
				this.answerInput.type = "text";
				this.answerInput.className = "form-control";
				this.answerInput.oninput=function(){
					that.contentChanged();
				};
				this.jumpInput = document.createElement("input");
				this.jumpInput.type = "text";
				this.jumpInput.className = "form-control";
				this.jumpInput.style.display = "none";
				this.jumpInput.oninput=function(){
					that.contentChanged();
				};

				this.jumpCheckbox = new checkbox("", "Jump", "jumpEnabled");
				this.jumpCheckbox.getView().checked = false;
				this.jumpCheckbox.getView().onchange = function(){
					that.toggleJumpOption();
				};

				this.div.appendChild(this.answerInput);
				if(canHaveJump){
					this.jumpCheckbox.addTo(this.div);
					this.div.appendChild(this.jumpInput);	
				};
			};
         	this.updateContent = function(answer){
         		this.answer = answer;
         		if (this.answerInput.value != this.answer.getAnswerText()){
         			this.answerInput.value = this.answer.getAnswerText();
         		}	
			}  			
			this.getView = function(){
				return this.div;
			};
			this.contentChanged = function(){
				this.answer.setAnswerText(this.answerInput.value); 
				this.answer.setjumpID(this.jumpInput.value);	
				parentView.contentChanged();
			};
			this.getAnswer = function(){
				return this.answer;
			};
			this.toggleJumpOption = function(){
				if(this.jumpCheckbox.isChecked()){
					this.jumpInput.style.display = "inherit";
				} else {
					this.jumpInput.style.display = "none";
					if (this.jumpInput.value != ""){
						this.jumpInput.value = "";
						this.contentChanged();
					}
				}
			}
			this.canHaveJump = canHaveJump;
			this.answer = answer;
			this.parentView = parentView;
			this.jumpCheckbox = null;
			this.answerInput = null;
			this.jumpInput = null;
			this.initializeView();
			this.updateContent(this.answer);
		};
		function chapterView(chapter, parentView) {
			this.updateContent = function(chapter){
         		if (this.titleInput.value != this.chapter.getTitle()){
         			this.titleInput.value = this.chapter.getTitle();
         		}				
				if (this.questionArrayView != null){
					if(this.chapter.getQuestions() != this.questionArrayView.getQuestions()){
						this.questionArrayView.updateContent(this.chapter.getQuestions);
					}
				} else {
					this.questionArrayView = new questionArrayView(this.chapter.getQuestions(), this, false);
					this.div.appendChild(this.questionArrayView.getView());
				}
			}  			
			this.initializeView = function(){
				this.div = document.createElement('div');
				this.div.className = "chapter";
				var that = this;
				this.titleInput = document.createElement("input");
				this.titleInput.type = "text";
				this.titleInput.className = "form-control"
				this.titleInput.oninput=function(){
					that.contentChanged();
				};
				this.div.appendChild(this.titleInput);
			}	
			this.getView = function(){
				return this.div;
			}
			this.getChapter = function(){
				return this.chapter;
			}
			this.contentChanged = function(){
				this.chapter.setQuestions(this.questionArrayView.getQuestions());
				this.chapter.setTitle(this.titleInput.value); 
				this.parentView.contentChanged();
			};
			this.chapter = chapter;
			this.parentView = parentView;
			this.initializeView();
			this.updateContent(this.chapter);
		};
		function trackerView(tracker, parentView){
			this.initializeView = function(){
				this.div = document.createElement('div');
				this.div.className = "tracker";
				var that = this;
				this.fusionTableIDInput = document.createElement("input");
				this.fusionTableIDInput.type = "text";
				this.fusionTableIDInput.className = "form-control"
				this.fusionTableIDInput.oninput=function(){
					that.contentChanged();
				};			
				this.div.appendChild(this.fusionTableIDInput);
			}
			this.updateContent = function(tracker){
				this.tracker = tracker;
         		if (this.fusionTableIDInput.value != this.tracker.getfusionTableID()){
         			this.fusionTableIDInput.value = this.tracker.getfusionTableID();
         		}
         		if (this.questionArrayView != null){
         			if(this.tracker.getQuestions() != this.questionArrayView.getQuestions()){
         				this.questionArrayView.updateContent(this.tracker.getQuestions);
         			}
         		} else {
         			this.questionArrayView = new questionArrayView(this.tracker.getQuestions(), this, false);
         			this.div.appendChild(this.questionArrayView.getView());
         		}
			} 			
			this.getView = function(){
				return this.div;
			}
			this.getTracker = function(){
				return this.tracker;
			}
			this.contentChanged = function(){
				this.tracker.setQuestions(this.questionArrayView.getQuestions());
				this.tracker.setfusionTableID(this.fusionTableIDInput.value);
				this.parentView.contentChanged();
			};
			this.tracker = tracker;
			this.parentView = parentView;
			
			this.initializeView();
			this.updateContent(this.tracker);
		}
		function questionView(question, parentView, inLoop) {
			this.updateContent = function(question){
				this.question = question;
				if (this.questionInput.value != this.question.getQuestionText()){
         			this.questionInput.value = this.question.getQuestionText();
         		}
				if (this.IDInput.value != this.question.getQuestionID()){
         			this.IDInput.value = this.question.getQuestionID();
         		}         
         		if (this.questionKindDropDown.options[this.questionKindDropDown.selectedIndex].value != this.question.getKind()){
         			var indexToSelect;
         			for (var i = this.questionKindDropDown.options.length - 1; i >= 0; i--) {
         				if (this.questionKindDropDown.options[i].value == this.question.getKind()){
         					indexToSelect = i;
         					break;
         				}
         			};
         			this.questionKindDropDown.selectedIndex = indexToSelect;
         			this.updateQuestionKind(this.question.getKind());
         		}
         		if ((this.question.getJumpID() != null) && (!this.inLoop)){
         			this.jumpCheckbox.setCheckedState(true);
         			this.toggleJumpOption();
         			this.jumpInput.value = this.question.getJumpID();
         		} else {
         			this.jumpCheckbox.setCheckedState(false);
         		}
			} 			

			this.initializeView = function(){
				this.div = document.createElement('div');
				this.div.className = "question";
				this.IDInput = document.createElement("input");
				this.IDInput.type = "text";
				this.IDInput.className = "form-control"
				var that = this;
				this.IDInput.oninput=function(){
					that.contentChanged();
				};
				this.questionInput = document.createElement("input");
				this.questionInput.type = "text";
				this.questionInput.className = "form-control"
				this.questionInput.oninput = function(){
					that.contentChanged();
				};

				this.questionKindDropDown = new select("", "", this.questionKinds.getNames(), this.questionKinds.getJsonNames());
				this.questionKindDropDown.onchange = function(){
					that.updateQuestionKind(this.options[this.selectedIndex].value);
					that.contentChanged();
				};

				this.jumpInput = document.createElement("input");
				this.jumpInput.type = "text";
				this.jumpInput.className = "form-control"
				this.jumpInput.style.display = "none";
				this.jumpInput.oninput = function(){
					that.contentChanged();
				};

				this.jumpCheckbox = new checkbox("", "Jump", "jumpEnabled");
				this.jumpCheckbox.getView.checked
				this.jumpCheckbox.getView().onchange = function(){
					that.toggleJumpOption();
				};

				this.div.appendChild(this.IDInput);
				this.div.appendChild(this.questionInput);	
				if (!this.inLoop){
					this.jumpCheckbox.addTo(this.div);
				}
				this.div.appendChild(this.jumpInput);	
				this.div.appendChild(this.questionKindDropDown);	
			}
			this.getView = function(){
				return this.div;
			}			
			this.contentChanged = function(){
				this.question.setQuestionText(this.questionInput.value); 
				this.question.setQuestionID(this.IDInput.value);	
				if (this.jumpInput.value == ""){
					this.question.setjumpID(null);
				} else{
					this.question.setjumpID(this.jumpInput.value);
				}
				if (this.answerArrayView != null){
					this.question.setAnswers(this.answerArrayView.getAnswers());
				} else{	
					this.question.setAnswers(null);
				}
				if (this.questionArrayView != null){
					this.question.setLoopQuestions(this.questionArrayView.getQuestions());
				} else{
					this.question.setLoopQuestions(null);
				}
				if (this.otherCheckbox != null){
					this.question.setOtherEnabled(this.otherCheckbox.isChecked());
				} else{
					this.question.setOtherEnabled(null);
				}
				this.question.setKind(this.questionKindDropDown.options[this.questionKindDropDown.selectedIndex].value);
				this.parentView.contentChanged();
			};
			this.getQuestion = function(){
				return this.question;
			}
			this.toggleJumpOption = function(){
				if(this.jumpCheckbox.isChecked()){
					this.jumpInput.style.display = "inherit";
				} else {
					this.jumpInput.style.display = "none";
					if (this.jumpInput.value != ""){
						this.jumpInput.value = "";
						this.contentChanged();
					}
				}
			}
			this.updateQuestionKind = function(newQuestionKind){
				switch(newQuestionKind){
					// We don't need arrays
					case this.questionKinds.OPEN_TEXT["jsonName"]:
					case this.questionKinds.OPEN_NUMBER["jsonName"]: 
					case this.questionKinds.IMAGE["jsonName"]:
						this.removeOtherOption();
						this.removeAnswerArray();
						this.removeQuestionArray();
						break;
					// We need an answers array
					case this.questionKinds.ORDERED["jsonName"]:
						this.removeQuestionArray();
						this.removeOtherOption();
						this.addAnswerArray();	
						break;					
					case this.questionKinds.MULTIPLE_CHOICE["jsonName"]:
					case this.questionKinds.CHECKBOX["jsonName"]:
						this.addOtherOption();
						this.removeQuestionArray();
						this.addAnswerArray();	
						break;
					// We need a question array
					case this.questionKinds.LOOP["jsonName"]:
						this.removeOtherOption();
						this.removeAnswerArray();
						this.addQuestionArray();
						break;	
				}
			}
			this.addQuestionArray = function(){
				if (this.questionArrayView == null){
					this.questionArrayView = new questionArrayView(this.question.getLoopQuestions(), this, true);
					this.div.appendChild(this.questionArrayView.getView());
				}				
			}
			this.addAnswerArray = function(){
				if (this.answerArrayView == null){
					var canHaveJump = false;
					if((this.questionKindDropDown.options[this.questionKindDropDown.selectedIndex].value == this.questionKinds.MULTIPLE_CHOICE["jsonName"]) && !this.inLoop){
						canHaveJump = true;
					}
					this.answerArrayView = new answerArrayView(this.question.getAnswers(), this, canHaveJump);
					this.div.appendChild(this.answerArrayView.getView());
				}
			}
			this.removeQuestionArray = function(){
				if (this.questionArrayView != null){
					this.div.removeChild(this.questionArrayView.getView());
					this.questionArrayView = null;
				}
			}
			this.removeAnswerArray = function(){
				if (this.answerArrayView != null){
					this.div.removeChild(this.answerArrayView.getView());
					this.answerArrayView = null;
				}
			}
			this.addOtherOption = function(){
				if (this.otherCheckbox == null){
					this.otherCheckbox = new checkbox("", "Other", "otherEnabled");
					var that = this;
					this.otherCheckbox.getView().onchange = function(){
						that.contentChanged();
					};
					this.otherCheckbox.addTo(this.div);
				}
			}
			this.removeOtherOption = function(){
				if (this.otherCheckbox != null){
					this.otherCheckbox.removeFrom(this.div);
					this.otherCheckbox = null;
				}
			}			

			this.question = question;
			this.parentView = parentView;
			this.inLoop = inLoop;
			this.questionKinds = new questionKind(this.inLoop);
			this.answerArrayView = null;
			this.questionArrayView = null;
			this.questionKindDropDown = null;
			this.otherCheckbox = null;
			this.IDInput = null;
			this.questionInput = null;
			this.questionKindDropDown = null;
			this.jumpInput = null;
			this.jumpCheckbox = null;
			this.initializeView();
			this.updateContent(this.question);
		};

		// Part of the code for the models of the data
		///"&)(!/=)"!/=)/"!?/((/&(&%"!(&/=")/)"!(??"!)"=)?/")!=/!&"/!&?#&*)
		function answer() {
			this.answerText = null; // String
			this.jumpID = null; // String
			this.getAnswerText = function() {
				return this.answerText;
			};
			this.setAnswerText = function(answerText) {
				this.answerText = answerText;
			};
			this.getJumpID = function() {
				return this.jumpID;
			};
			this.setjumpID = function(jumpID) {
				this.jumpID = jumpID;
			};
			this.generateJSON = function(){  		
				var answerJSON = {};
				if (this.answerText != null){
					answerJSON["Answer"] = this.answerText;
				}
				if (this.jumpID != null){
					answerJSON["Jump"] = this.jumpID;
				}
  				return answerJSON;
  			}
  			this.constructFromJSON = function(object){
  				if("Answer" in object){
  					this.answerText = object["Answer"];
  				} else {
  					console.log("No answer text in answer object :-(");
  				}
  			}
		};

		function question(inLoop) {
			this.inLoop = inLoop; // Boolean to know if inside loop
			this.kind = null;
			this.loopQuestions = []; // Question instances inside this question.
			this.questionText = null; // String
			this.answers = []; // Answer instances
			this.questionID = null; // String
			this.otherEnabled = null; // Boolean 
			this.jumpID = null; // String
			this.getKind = function() {
				return this.kind;
			};
			this.setKind = function(kind) {
				this.kind = kind;
			};
			this.getQuestionText = function() {
				return this.questionText;
			};
			this.setQuestionText = function(questionText) {
				this.questionText = questionText;
			};
			this.getAnswers = function() {
				return this.answers;
			};
			this.setAnswers = function(answers) {
				this.answers = answers;
			};
			this.getJumpID = function() {
				return this.jumpID;
			};
			this.setjumpID = function(jumpID) {
				this.jumpID = jumpID;
			};
			this.getQuestionID = function() {
				return this.questionID;
			};
			this.setQuestionID = function(questionID) {
				this.questionID = questionID;
			};
			this.isOtherEnabled = function() {
				return otherEnabled;
			};
			this.setOtherEnabled = function(otherEnabled) {
				this.otherEnabled = otherEnabled;
			};
			this.getLoopQuestions = function() {
				return this.loopQuestions;	
			};
			this.setLoopQuestions = function(loopQuestions) {
				this.loopQuestions = loopQuestions;
			};
			this.generateJSON = function(){				
				var questionJSON = {};
  				questionJSON["Question"] = this.questionText;
  				questionJSON["id"] = this.questionID;
  				questionJSON["Kind"] = this.kind;
  				questionJSON["Jump"] = this.jumpID;
  				if (this.otherEnabled != null){
  					questionJSON["Other"] = this.otherEnabled;
  				}
 				if ((this.answers !== null) && (this.answers.length >0)){
  					var length = this.answers.length;
  					var answersArray = [];
  					for (var i = 0; i < length; i++) {
  						answersArray.push(this.answers[i].generateJSON());
  					};
  					questionJSON["Answers"] = answersArray;
  				}
  				if(this.loopQuestions != null){
  					var questionsJSONArray = [];
  					for(var i=0; i < this.loopQuestions.length; i++){
						questionsJSONArray.push(this.loopQuestions[i].generateJSON());
					}
					if (questionsJSONArray.length > 0){
						questionJSON["Questions"] = questionsJSONArray;
					}
  				}
  				return questionJSON;
  			}
  			this.constructFromJSON = function(object){
  				if("Kind" in object){
  					var tempKind = object["Kind"];
  					var qK = new questionKind(this.inloop);
  					var JSONNames = qK.getJsonNames();
  					var validQuestionKind = false;
  					for (i = 0; i < JSONNames.length; i++) {
  						if (JSONNames[i] === tempKind) {
  							this.kind = tempKind;
  							validQuestionKind = true;
  						}
  					}
  					if(!validQuestionKind){
  						console.log("Question kind in question object is not a valid value :-(");	
  					}
  				} else {
  					console.log("No question kind in question object :-(");
  				}
  				if("Jump" in object){
  					this.jumpID = object["Jump"];
  				} else {

  				}
  				if("Question" in object){
  					this.questionText = object["Question"];
  				} else {
  					console.log("No question text in question object :-(")
  				}
  				if("id" in object){
  					this.questionID = object["id"];
  				}
  				if((this.kind === qK.MULTIPLE_CHOICE.jsonName) || (this.questionKind === qK.CHECKBOX.jsonName)){
  					if("Other" in object){
  						this.otherEnabled = (object["Other"] == "true");
  					} else {
  						this.otherEnabled = false;
  					}
  				}
  				if(((this.kind === qK.MULTIPLE_CHOICE.jsonName) || (this.kind === qK.CHECKBOX.jsonName)) || (this.kind === qK.ORDERED.jsonName)){
  					if("Answers" in object){
  						var objectAnswers = object["Answers"];
  						if(Array.isArray(objectAnswers)){
  							this.answers = [];
  							for(var i=0; i < objectAnswers.length; i++){
  								this.answers.push(new answer());
  								this.answers[i].constructFromJSON(objectAnswers[i]);
  							}
  						}  else {
  							console.log("Answers in question is not an Array :-(");
  						}
  					} else {
  						console.log("No answers in question object :-(");
  					}
  				}
  				if((this.kind === qK.LOOP.jsonName) && (this.inLoop == false)){
  					if("Questions" in object){
  						var objectQuestions = object["Questions"];
  						if(Array.isArray(objectQuestions)){
  							this.loopQuestions = [];
  							for(var i=0; i < objectQuestions.length; i++){
  								this.loopQuestions.push(new question(true));
  								this.loopQuestions[i].constructFromJSON(objectQuestions[i]);
  							}
  						}  else {
  							console.log("Questions in loop questions is not an Array :-(");
  						}
  					} else {
  						console.log("No questions in loop question object :-(");
  					}
  				}
  			}
		};
		function questionKind(inLoop){
			// Object to list the question kinds possible to add to a question array
			this.inLoop = inLoop;
			this.MULTIPLE_CHOICE = {
				jsonName:"MC",
				name:"Multiple choice"
			};
			this.OPEN_NUMBER = {
				jsonName:"ON",
				name:"Open number"
			};
			this.OPEN_TEXT = {
				jsonName:"OT",
				name:"Open text"
			};
			this.IMAGE = {
				jsonName:"IM",
				name:"Picture"
			};
			this.CHECKBOX = {
				jsonName:"CB",
				name:"Checkbox"
			};
			this.ORDERED = {
				jsonName:"OL",
				name:"Ordered list"
			};
			this.LOOP = {
				jsonName:"LP",
				name:"Loop"
			};
			this.getJsonNames = function(){
				var jsonNames = [];
				jsonNames.push(this.OPEN_TEXT["jsonName"]);
				jsonNames.push(this.OPEN_NUMBER["jsonName"]);				
				jsonNames.push(this.MULTIPLE_CHOICE["jsonName"]);
				jsonNames.push(this.CHECKBOX["jsonName"]);
				jsonNames.push(this.ORDERED["jsonName"]);
				jsonNames.push(this.IMAGE["jsonName"]);
				if(!this.inLoop){
					jsonNames.push(this.LOOP["jsonName"]);
				};
				return jsonNames;
			};
			this.getNames = function(){
				var names = [];
				names.push(this.OPEN_TEXT["name"]);
				names.push(this.OPEN_NUMBER["name"]);				
				names.push(this.MULTIPLE_CHOICE["name"]);
				names.push(this.CHECKBOX["name"]);
				names.push(this.ORDERED["name"]);
				names.push(this.IMAGE["name"]);
				if(!this.inLoop){
					names.push(this.LOOP["name"]);
				}
				return names;
			};
		};
		function chapter() {
		  	this.title = null; // String
		  	this.questions = []; //Array of question objects
		  	this.getTitle = function() {
		    	return this.title;
			};
			this.setTitle = function(title) {
				this.title = title;
			};
			this.getQuestions = function() {
				return this.questions;
			};
			this.setQuestions = function(questions) {
				this.questions = questions;
			};
			this.addQuestion = function(newQuestion){
				this.questions.push(newQuestion);
			};
			this.getQuestionCount = function() {
				if (this.questions == null){
					return 0
				} else {
					return this.questions.length;
				}
  			};
  			this.generateJSON = function(){
  				var chapterJSON = {};
				var questionsJSONArray = [];
				for(var i=0; i < this.questions.length; i++){
					questionsJSONArray.push(this.questions[i].generateJSON());
				}
				chapterJSON["Chapter"] = this.title;
				if (questionsJSONArray.length > 0){
					chapterJSON["Questions"] = questionsJSONArray;
				}
				return chapterJSON;
  			}
  			this.constructFromJSON = function(object){
				if("Questions" in object){
					var objectQuestions = object["Questions"];
					if(Array.isArray(objectQuestions)){
						this.questions = [];
						for(var i=0; i < objectQuestions.length; i++){
							this.questions.push(new question(false));
							this.questions[i].constructFromJSON(objectQuestions[i]);
						}
					}  else {
						console.log("Questions in chapter is not an Array :-(");
					}
				} else {
					console.log("No questions in chapter object :-(");
				}
				if("Chapter" in object){
					this.title = object["Chapter"];
				} else {
					console.log("No chapter title in object :-(");
				}
			}
		};
		function survey(){
			this.chapters = []; // Instances of chapters
			this.fusionTableID = null; // String

			this.getfusionTableID = function() {
				return this.fusionTableID;
			};
			this.setfusionTableID = function(fusionTableID) {
				this.fusionTableID = fusionTableID;
			};
			this.getChapters = function() {
				return this.chapters;
			};
			this.setChapters = function(chapters) {
				this.chapters = chapters;
			};
			this.addChapter = function(newChapter){
				this.chapters.push(newChapter);
			}
			this.getChapterCount = function() {
				if (this.chapters == null){
					return 0
				} else {
					return chapters.length;
				}
  			}
  			this.generateJSON = function(){
				var surveyJSON = {};
				var chaptersJSONArray = [];
				for(var i=0; i < this.chapters.length; i++){
					chaptersJSONArray.push(this.chapters[i].generateJSON());
				}
				surveyJSON["Chapters"] = chaptersJSONArray;
				surveyJSON["TableID"] = this.fusionTableID;
				return surveyJSON;
			}
			this.constructFromJSON = function(object){
				if("Chapters" in object){
					var objectChapters = object["Chapters"];
					if(Array.isArray(objectChapters)){
						this.chapters = [];
						for(var i=0; i < objectChapters.length; i++){
							this.chapters.push(new chapter());
							this.chapters[i].constructFromJSON(objectChapters[i]);
						}
					}  else {
						console.log("Chapters in survey is not an Array :-(");
					}
				} else {
					console.log("No chapters in survey object :-(");
				}
				if("TableID" in object){
					this.fusionTableID = object["TableID"];
				} else {
					console.log("No fusionTableID in survey object :-(");
				}
			}
		};
		function tracker(){
			this.questions = []; // Instances of questions
			this.fusionTableID = null; // String
			this.getfusionTableID = function() {
				return this.fusionTableID;
			};
			this.setfusionTableID = function(fusionTableID) {
				this.fusionTableID = fusionTableID;
			};
			this.getQuestions = function() {
			    return this.questions;
			};
			this.setQuestions = function(questions) {
				this.questions = questions;
			};
			this.generateJSON = function(){
				var trackerJSON = {};
				var questionsJSONArray = [];
				for(var i=0; i < this.questions.length; i++){
					questionsJSONArray.push(this.questions[i].generateJSON());
				}
				trackerJSON["Questions"] = questionsJSONArray;
				trackerJSON["TableID"] = this.fusionTableID;
				return trackerJSON;
			}
			this.constructFromJSON = function(object){
				if("Questions" in object){
					var objectQuestions = object["Questions"];
					if(Array.isArray(objectQuestions)){
						this.questions = [];
						for(var i=0; i < objectQuestions.length; i++){
							this.questions.push(new question(false));
							this.questions[i].constructFromJSON(objectQuestions[i]);
						}
					}  else {
						console.log("Questions in tracker is not an Array :-(");
					}
				} else {
					console.log("No questions in tracker object :-(");
				}
				if("TableID" in object){
					this.fusionTableID = object["TableID"];
				} else {
					console.log("No fusionTableID in tracker object :-(");
				}
			}
		};
		function project(){
			this.survey = null;
			this.tracker = null;
			this.getSurvey = function(){
				return this.survey;
			}
			this.setSurvey = function(survey){	
				this.survey = survey;
			}
			this.getTracker = function(){
				return this.tracker;
			}
			this.setTracker = function(tracker){
				this.tracker = tracker;
			}
			this.generateJSON = function(){
				var projectJSON = {};
				projectJSON["Survey"] = this.survey.generateJSON();
				projectJSON["Tracker"] = this.tracker.generateJSON();
				return projectJSON;
			}
			this.constructFromString = function(JSONprojectString){
				var projectObject = null;
				try{
					var projectObject = JSON.parse(JSONprojectString);
				}catch(e){
        			alert("JSON not parsed correctly, the input is not correct JSON :-("); //error in the above string(in this case,yes)!
        		}
        		if (!(projectObject == null)){
        			if("Survey" in projectObject){
        				this.survey = (new survey());
        				this.survey.constructFromJSON(projectObject["Survey"]);
        			} else {
        				console.log("No survey in project object :-(");
        			}
        			if("Tracker" in projectObject){
        				this.tracker = (new tracker());
        				this.tracker.constructFromJSON(projectObject["Tracker"]);
        			} else {
        				console.log("No tracker in project object :-(");
        			}
        		}
			}
		}
	</script>
</html>